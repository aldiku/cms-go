{{ define "content" }}

<style>
  #schemaEditor, #templateEditor {
    width: 100%;
    height: 300px;
    border: 1px solid #ddd;
    border-radius: 0.375rem; /* Tailwind rounded-md */
  }
</style>

<div class="max-w-4xl mx-auto py-8 space-y-6">

  <!-- Card -->
  <div class="bg-white shadow rounded-lg overflow-hidden">
    <!-- Card Header -->
    <div class="bg-blue-600 text-white px-6 py-4">
      <h4 class="text-lg font-semibold mb-0">Component Editor</h4>
    </div>

    <!-- Card Body -->
    <div class="px-6 py-6">
      <form method="POST" action="{{if .Component}}/admin/components/{{.Component.ID}}/edit{{else}}/admin/components/new{{end}}" class="space-y-6">

        <!-- Name -->
        <div>
          <label for="name" class="block text-gray-700 font-medium mb-2">Name</label>
          <input
            type="text"
            id="name"
            name="name"
            class="w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
            value="{{if .Component}}{{.Component.Name}}{{end}}"
            required
          >
        </div>

        <!-- Schema Editor -->
        <div>
          <label for="schemaEditor" class="block text-gray-700 font-medium mb-2">Schema (JSON)</label>
          <div id="schemaEditor" class="rounded-md border border-gray-300 shadow-sm">{{if .Component}}{{.Component.Schema}}{{end}}</div>
          <textarea id="schema" name="schema" hidden>{{if .Component}}{{.Component.Schema}}{{end}}</textarea>
        </div>

        <!-- Template Editor -->
        <div>
          <label for="templateEditor" class="block text-gray-700 font-medium mb-2">Template (Go HTML)</label>
          <div id="templateEditor" class="rounded-md border border-gray-300 shadow-sm">{{if .Component}}{{.Component.Template}}{{end}}</div>
          <textarea id="template" name="template" hidden>{{if .Component}}{{.Component.Template}}{{end}}</textarea>
        </div>

        <!-- Submit Button -->
        <div class="flex justify-end">
          <button type="submit" class="bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600 transition-colors">
            ðŸ’¾ Save
          </button>
        </div>

      </form>
    </div>
  </div>

</div>

<!-- Ace Editor -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.32.6/ace.js"></script>
<script>
  // Schema editor
  const schemaEditor = ace.edit("schemaEditor");
  schemaEditor.setTheme("ace/theme/github");
  schemaEditor.session.setMode("ace/mode/json");
  schemaEditor.setOption("wrap", true);

  // Template editor
  const templateEditor = ace.edit("templateEditor");
  templateEditor.setTheme("ace/theme/github");
  templateEditor.session.setMode("ace/mode/html");
  templateEditor.setOption("wrap", true);

  // Sync editors to hidden textareas before submit
  document.querySelector("form").addEventListener("submit", function () {
    document.getElementById("schema").value = schemaEditor.getValue();
    document.getElementById("template").value = templateEditor.getValue();
  });
</script>

{{ end }}
